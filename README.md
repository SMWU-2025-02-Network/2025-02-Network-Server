# 📚 도서관 환경 모니터링 네트워크 (Library Environment Monitoring Network)

## 2025-2 네트워크 프로젝트
중앙도서관 1~6층을 대상으로, **좌석 QR 체크인 + 익명 채팅 + 환경 센서 대시보드**를 제공하는 PC 기반 시스템입니다.

---

## 1. 프로젝트 개요

도서관 내 특정 층 이용자가 좌석 QR 코드를 통해 **체크인**하면,

- 같은 층/같은 구역(열람실) 사용자끼리 참여하는 **익명 채팅방**에 자동 접속되고,  
- 해당 구역에 설치된 **IoT 센서(온도·조도·CO₂)** 데이터를 기반으로 한 **실시간 대시보드**를 확인할 수 있습니다.

또한 각 층 관리자가 동일 구역 채팅에 참여하며,  
추가로 모든 층 관리자가 모이는 **관리자 전용 채팅방**도 존재합니다.

네트워크 장애 발생 시 서버는 이를 감지해 **관리자 PC(안내 데스크)** 로 자동 보고합니다.

---

## 2. 서비스 시나리오

### ✔ 기본 사용 흐름

1. 이용자가 도서관에 입장 후 좌석에 부착된 **QR 코드를 스캔**
2. 서버가 QR 정보를 기반으로 **층/구역(AERA) 매핑**
3. 체크인 완료 시:
   - 해당 AREA **익명 채팅방 자동 접속**
   - AREA **환경 모니터링 대시보드** 제공
4. 제공 기능
   - 좌석 사용 여부 확인
   - 자리 비움 타이머 설정 → 자동 체크아웃
   - 동일 AREA 사용자들과 익명 채팅
   - 실시간 환경 데이터 조회

### ✔ 관리자 기능

- 층/구역 환경 데이터 실시간 모니터링  
- 이용자 채팅 피드백 확인 및 응답  
- **관리자 통합 채팅방**에서 모든 층 관리자와 협업  
- 네트워크 장애 및 센서 오류 자동 알림 수신  

---

## 3. 네트워크 AREA 구성

- 중앙도서관 **1~6층** 대상  
- **1, 2, 5층** → 열람실 2개 → 1층당 AREA 2개  
- **3, 4, 6층** → 열람실 구분 없음 → AREA 1개  

### 네트워크 구조 포인트

- **L3 코어 스위치 기반 중앙집중형 구조**  
- AREA별 **VLAN/서브넷** 분리  
- 센서·사용자·관리자 트래픽이 모두 L3 라우팅 기반으로 서버와 통신  
- 센서 데이터는 AREA 정보를 포함하여 서버에 전달됨  

---

## 4. 시스템 아키텍처

### 🖥 주요 컴포넌트

#### **1) Client (Java Swing)**

- 로그인(사용자/관리자 역할 선택)  
- 층/AREA 선택 UI  
- 좌석 체크인 결과 표시  
- 익명 채팅 UI  
- 환경 데이터(온도·조도·CO₂) 대시보드  

#### **2) Server (Java Socket)**

- 클라이언트 연결 관리(멀티스레드)  
- 좌석 체크인/체크아웃 처리  
- 사용자/관리자 분리  
- AREA별 익명 채팅방 관리  
- 관리자 통합 채팅방 관리  
- 센서 데이터 수집 & 실시간 브로드캐스트  
- 네트워크 장애 감지 및 알림  

#### **3) Sensor Publisher (가상 IoT 센서)**

- 각 AREA 센서를 가상으로 구현  
- 주기적으로 온도·조도·CO₂ 값 생성  
- 서버로 값 송출 (Socket 기반 전송)  

---

## 5. 주요 기능

### ✔ 좌석 체크인/체크아웃  
### ✔ 자리 비움 타이머  
### ✔ 센서 데이터 실시간 대시보드  
### ✔ AREA별 익명 채팅  
### ✔ 관리자 통합 채팅  
### ✔ 네트워크 장애 자동 알림  

---

## 6. 기술 스택

- **Java 17/21**  
- **Java Socket (TCP/IP)**  
- **Java Swing**  
- Gradle 또는 Maven  
- (옵션) MySQL 또는 H2 Database  

---

## 7. 프로젝트 구조 예시

```
.
├── README.md
├── server
│   ├── src
│   └── build.gradle
├── client
│   ├── src
│   └── build.gradle
└── sensor-publisher
    ├── src
    └── build.gradle
```

---

## 8. 실행 방법

### 1) 서버 실행

```
cd server
./gradlew run
```

### 2) 센서 퍼블리셔 실행

```
cd sensor-publisher
./gradlew run
```

### 3) 클라이언트 실행

```
cd client
./gradlew run
```

---

## 9. 향후 확장 아이디어

- 실제 MQTT 브로커(Mosquitto) 연동  
- 진짜 IoT 센서(BME280 등)와 게이트웨이 연결  
- 환경 데이터 이상치 감지 시스템  
- 모바일/웹 클라이언트 확장  
- DB 기반 시계열 분석 및 시각화  

---

## 10. 참고 문서

- **3차 네트워크 설계도(최종본)**  
- 네트워크 트래픽 흐름도  
- 시스템 구조도  
