📚 도서관 환경 모니터링 네트워크 (Library Environment Monitoring Network)

2025-2 네트워크 프로젝트
중앙도서관 1~6층을 대상으로, 좌석 QR 체크인 + 익명 채팅 + 환경 센서 대시보드를 제공하는 PC 기반 통합 시스템입니다.

1. 프로젝트 개요

도서관 내 특정 층 이용자가 좌석 QR 코드를 통해 체크인하면,

같은 층 / 같은 구역(열람실)에 있는 사용자들끼리만 참여하는 익명 채팅방에 자동 접속되고,

해당 구역에 설치된 IoT 센서(온도·조도·CO₂) 데이터를 기반으로 한 실시간 대시보드를 확인할 수 있습니다.

또한, 각 층마다 관리자 계정이 존재하여

이용자들의 환경 관련 피드백(“더워요”, “조명 꺼졌어요” 등)을 채팅으로 수집하고,

실시간 환경 데이터와 함께 모니터링하여 빠르게 대응할 수 있습니다.

네트워크 장애 발생 시, 서버는 이를 자동으로 감지하여 안내 데스크(관리자 PC) 로 리포트하는 기능도 포함합니다.

2. 서비스 시나리오
✅ 기본 사용 흐름

이용자가 도서관에 입장하여 좌석에 부착된 QR 코드를 스캔한다.

서버는 좌석 번호 + 층/구역 정보를 바탕으로 사용자를 특정 AREA(네트워크 구역) 에 매핑한다.

체크인이 완료되면,

해당 층/구역의 익명 채팅방에 자동 접속

해당 구역의 환경 데이터 대시보드를 조회할 수 있는 화면으로 진입

사용자는 다음 기능을 이용할 수 있다.

좌석 상태 확인 (사용 가능/사용 중)

자리 비움 타이머 설정 및 자동 체크아웃

동일 구역 사용자와 익명 채팅

온도·조도·CO₂ 등 환경 데이터 조회

✅ 관리자 기능

각 층별 관리자는 다음을 수행할 수 있습니다.

해당 층/구역의 전체 좌석 상태 모니터링

익명 채팅을 통해 올라오는 피드백 확인 및 답변

층/구역별 실시간 환경 데이터 대시보드 확인

모든 층 관리자가 함께 참여하는 관리자 전용 통합 채팅방이 별도로 존재합니다.

✅ 네트워크 장애 처리

네트워크 연결이 끊기거나, 특정 구역 센서/클라이언트와의 통신이 일정 시간 이상 응답이 없을 경우:

서버에서 장애 발생 로그 기록

안내 데스크(관리자용 PC 클라이언트)로 자동 알림 전송

3. 네트워크 AREA 설계 개요

대상: 중앙도서관 1~6층

그 중:

1층, 2층, 5층은 열람실이 2개씩 존재한다고 가정
→ 각 층을 2개의 네트워크 구역(AREA) 로 분리

나머지 층(3, 4, 6층)은 열람실 구분 없이 층 단위로 하나의 AREA 로 구성

🔹 네트워크 설계 포인트

L3 코어 스위치를 중심으로 모든 네트워크 트래픽이 수렴하는 중앙집중형 구조

각 층/구역(AREA)은 서브넷 또는 VLAN 으로 논리적으로 분리

클라이언트 PC, 센서 게이트웨이(또는 가상 퍼블리셔), 서버는
모두 L3 코어 스위치 기준으로 레이어3 라우팅을 통해 통신

상세 네트워크 구조 및 VLAN/서브넷 구성은 별도의 3차 네트워크 설계도(최종본) 문서를 참고합니다.

4. 시스템 아키텍처
🖥 전체 구성 (논리)

Client (Java + Swing)

일반 사용자 클라이언트

층/구역 선택 및 로그인(역할 선택: 사용자/관리자)

좌석 체크인/체크아웃 UI

채팅창 & 환경 대시보드 UI

Server (Java Socket 기반)

Java TCP 소켓 서버 (멀티스레드)

기능:

사용자 인증/역할 처리

좌석 상태 관리

AREA별 채팅방 관리

관리자 통합 채팅방 관리

센서 데이터 수신/저장/브로드캐스트

네트워크 장애 감지 및 관리자 알림

Sensor Publisher (가상 IoT 센서)

실제 IoT 센서 대신, PC에서 동작하는 가상 퍼블리셔 프로그램

각 층/구역별로 온도·조도·CO₂ 값을 주기적으로 생성

서버로 데이터를 전송 (설계 상 MQTT/HTTP 프로토콜, 구현은 Java 소켓 또는 HTTP로 단순화 가능)

Database (선택/추가 예정)

좌석 상태 로그, 센서 데이터 로그, 채팅 로그 등을 저장할 수 있는 DB

초기 버전에서는 인메모리 or 파일 저장 후, 필요 시 확장

5. 주요 기능 정리
5.1 좌석 체크인/체크아웃

좌석 QR 코드 → 좌석 번호 & AREA 매핑

체크인/체크아웃 시:

서버에 좌석 사용 상태 업데이트

같은 AREA에 있는 사용자들의 좌석맵에도 반영

5.2 자리 비움 타이머

사용자가 자리를 비울 때 타이머 설정

설정 시간 초과 시:

자동 체크아웃 처리

해당 좌석 상태를 “사용 가능”으로 변경

5.3 환경 데이터 수집 및 대시보드

센서(또는 가상 퍼블리셔)가 주기적으로 데이터를 송신

서버에서 구역별로 데이터 수집 후:

해당 AREA 사용자/관리자에게 실시간 전송

클라이언트 대시보드에서 차트/수치 형태로 표시

5.4 익명 채팅

AREA(층/구역) 단위 채팅방

사용자 닉네임 대신 익명 ID 또는 “User #1” 등의 식별값 사용

관리자도 같은 채팅에 참여해 이용자의 피드백 확인 및 응답

5.5 관리자 통합 채팅

모든 층의 관리자가 참여하는 별도의 채널

각 층에서 발생한 이슈 공유 및 대응 상황 논의

6. 기술 스택
🔧 Language & Runtime

Java (예: Java 17 / 21 등 팀에서 사용하는 버전)

멀티스레드 기반 서버 구현

🌐 Network

Java Socket (TCP/IP)

클라이언트 ↔ 서버 간 실시간 통신

채팅 및 센서 데이터 전송에 활용

(설계 상) MQTT / HTTP 프로토콜 개념 반영
→ 실제 구현에서는 Java 소켓으로 단순화하거나, HTTP 라이브러리로 시뮬레이션

🖼 UI

Java Swing

로그인/역할 선택 화면

층/구역 선택 화면

채팅 화면 (텍스트 영역 + 입력창 + 전송 버튼)

환경 대시보드 화면 (센서 값 표시, 차트 등)

📦 (선택) 기타

빌드 도구: Gradle 또는 Maven

로그: java.util.logging 또는 Logback/SLF4J

DB: 추후 MySQL / H2 등 연동 가능

7. 프로젝트 구조 (예시)
.
├── README.md
├── server
│   ├── src
│   │   └── ... (ServerMain, ClientHandler, AreaManager 등)
│   └── build.gradle / pom.xml
├── client
│   ├── src
│   │   └── ... (ClientMain, LoginView, ChatView, DashboardView 등)
│   └── build.gradle / pom.xml
└── sensor-publisher
    ├── src
    │   └── ... (SensorPublisherMain, FloorSensorSimulator 등)
    └── build.gradle / pom.xml


실제 폴더 구조와 클래스명은 팀 내 컨벤션에 맞게 수정하면 됩니다.

8. 실행 방법 (초기 버전 가이드 – 추후 업데이트 예정)
8.1 사전 준비

JDK 설치 (예: JDK 17 이상)

이 레포지토리 클론

git clone <repository-url>
cd <repository-root>

8.2 서버 실행
cd server
# Gradle 기준 예시
./gradlew run
# 또는
java -jar build/libs/server-*.jar

8.3 센서 퍼블리셔 실행
cd sensor-publisher
./gradlew run

8.4 클라이언트 실행
cd client
./gradlew run


실행 후, 역할(사용자/관리자) 및 층/구역 선택

좌석 체크인 시나리오 및 채팅/대시보드 기능 테스트

실제 실행 커맨드는 팀에서 사용하는 빌드 도구/설정에 맞게 수정해주세요.

9. 네트워크 설계 문서

본 프로젝트는 네트워크 구조 설계를 중요한 목표로 삼고 있으며,

L3 코어 스위치 기반 중앙집중형 구조

층/구역별 AREA 설계 (VLAN/서브넷)

서버/클라이언트/센서 트래픽 흐름도

등이 정리된 3차 네트워크 설계도(최종본) 을 함께 참고하여 이해도를 높일 수 있습니다.

10. 향후 확장 계획 (아이디어)

실제 MQTT 브로커 도입 (Mosquitto 등) 및 IoT 센서 디바이스 연동

DB를 이용한 장기 환경 데이터 시계열 분석

이상치 감지(너무 덥거나 CO₂ 농도 급격히 증가 등) 시 관리자 알림

웹 또는 모바일 클라이언트로의 확장
